<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Admin â€” Khasi Speech Collector</title>
    <link rel="stylesheet" href="/style.css" />
    <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>
</head>

<body>
    <!-- LOGIN -->
    <div id="loginView" class="login-wrap">
        <div class="header">
            <h1>ğŸ” Admin Login</h1>
            <p>Khasi Speech Collection Platform</p>
        </div>
        <div class="card">
            <label class="form-label">Username</label>
            <input class="input" id="loginUser" placeholder="Username" autocomplete="username"
                style="margin-bottom:12px" />
            <label class="form-label">Password</label>
            <input class="input" id="loginPass" type="password" placeholder="Password" autocomplete="current-password"
                style="margin-bottom:16px" />
            <button class="btn btn-primary" id="loginBtn" style="width:100%">Login</button>
            <div class="status" id="loginStatus"></div>
        </div>
        <footer class="company-footer">Â© 2026 Yantrikaran Innovations Private Limited</footer>
    </div>

    <!-- DASHBOARD -->
    <div id="dashView" class="container hidden">
        <div class="header">
            <h1>âš™ï¸ Admin Dashboard</h1>
            <p>Welcome, <span id="adminName"></span> Â· <a href="#" id="logoutBtn" style="font-size:.82rem">Logout</a>
            </p>
        </div>
        <div class="stats" id="statsGrid">
            <div class="stat-card">
                <div class="stat-value" id="statSentences">â€”</div>
                <div class="stat-label">Sentences</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="statRecordings">â€”</div>
                <div class="stat-label">Recordings</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="statSpeakers">â€”</div>
                <div class="stat-label">Speakers</div>
            </div>
        </div>
        <div class="dash-grid">
            <div class="dash-card" id="goUpload">
                <div class="icon">ğŸ“</div>
                <div class="label">Upload Data</div>
                <div class="desc">Import CSV/Excel sentences</div>
            </div>
            <div class="dash-card" id="goData">
                <div class="icon">ğŸ“Š</div>
                <div class="label">View Data</div>
                <div class="desc">Browse sentences & recordings</div>
            </div>
        </div>
        <div class="card">
            <div class="card-title">ğŸ”— Shareable Contributor Link</div>
            <div class="link-box"><code id="shareLink">â€”</code><button class="btn btn-sm btn-primary"
                    id="copyLinkBtn">Copy</button></div>
        </div>
        <div class="card">
            <div class="card-title">ğŸ“¥ Export ML Dataset</div>
            <p style="color:var(--muted);font-size:.84rem;margin-bottom:10px">Download CSV with sentences + audio URLs
                for model training</p>
            <a class="btn btn-primary btn-sm" href="/api/export">Download CSV</a>
        </div>
        <footer class="company-footer">Â© 2026 Yantrikaran Innovations Private Limited</footer>
    </div>

    <!-- UPLOAD SECTION -->
    <div id="uploadView" class="container hidden">
        <div style="display:flex;align-items:center;gap:10px;margin-bottom:20px">
            <button class="btn btn-ghost btn-sm" id="backFromUpload">â† Back</button>
            <h2 style="font-size:1.1rem;font-weight:600">Upload Sentence Data</h2>
        </div>
        <div class="card">
            <p style="color:var(--muted);font-size:.84rem;margin-bottom:6px">Upload Excel (.xlsx) or CSV with
                <strong>english</strong> and <strong>khasi</strong> columns
            </p>
            <p style="color:var(--muted);font-size:.78rem;margin-bottom:14px">Max file size: <strong>50 MB</strong>.
                Column names are flexible (english_text, English, ENGLISH, etc.)</p>
            <div class="drop-zone" id="dropZone">
                <div class="icon">ğŸ“‚</div>
                <p>Drag & drop or click to browse</p><input type="file" id="fileInput" accept=".xlsx,.xls,.csv"
                    style="display:none" />
            </div>
            <div class="upload-progress hidden" id="uploadProgress">
                <div class="label" id="uploadLabel">Uploadingâ€¦</div>
                <div class="bar">
                    <div class="fill" id="uploadFill" style="width:0%"></div>
                </div>
            </div>
            <div class="status" id="uploadStatus"></div>
        </div>
        <footer class="company-footer">Â© 2026 Yantrikaran Innovations Private Limited</footer>
    </div>

    <!-- DATA VIEWER (Unified â€” sentences with recordings) -->
    <div id="dataView" class="container hidden" style="max-width:1200px">
        <div style="display:flex;align-items:center;gap:10px;margin-bottom:16px">
            <button class="btn btn-ghost btn-sm" id="backFromData">â† Back</button>
            <h2 style="font-size:1.1rem;font-weight:600">Sentences & Recordings</h2>
        </div>
        <!-- Filter Bar -->
        <div class="filter-bar" id="filterBar">
            <div class="filter-item">
                <label class="form-label">Speaker</label>
                <select class="input" id="filterSpeaker" style="min-width:140px">
                    <option value="">All Speakers</option>
                </select>
            </div>
            <div class="filter-item">
                <label class="form-label">Status</label>
                <select class="input" id="filterRecorded">
                    <option value="">All</option>
                    <option value="yes">Recorded</option>
                    <option value="no">Not Recorded</option>
                </select>
            </div>
            <div class="filter-item">
                <label class="form-label">Sort</label>
                <select class="input" id="filterSort">
                    <option value="recorded_first">Recorded First</option>
                    <option value="id_asc">ID â†‘</option>
                    <option value="id_desc">ID â†“</option>
                </select>
            </div>
            <div class="filter-item" style="align-self:flex-end">
                <button class="btn btn-primary btn-sm" id="applyFilters">Apply</button>
                <button class="btn btn-ghost btn-sm" id="resetFilters">Reset</button>
            </div>
        </div>
        <div id="dataTableWrap" class="table-wrap"></div>
        <div class="pagination" id="dataPagination"></div>
        <footer class="company-footer">Â© 2026 Yantrikaran Innovations Private Limited</footer>
    </div>

    <script src="/admin.js"></script>
</body>

</html>